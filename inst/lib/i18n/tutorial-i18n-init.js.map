{
  "version": 3,
  "sources": ["../../../learnr-js/i18n/tutorial-i18n-init.js"],
  "sourcesContent": ["'use strict';\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\n$.extend({\n  keys: function keys(obj) {\n    return $.map(obj, function (v, k) {\n      return k;\n    });\n  },\n  includes: function includes(arr, val) {\n    return $.inArray(val, arr);\n  }\n});\n$(document).on('shiny:sessioninitialized', function () {\n  var i18nCustom = document.getElementById('i18n-cstm-trns');\n\n  if (!i18nCustom) {\n    i18nCustom = {\n      language: 'en'\n    };\n  } else {\n    i18nCustom = JSON.parse(i18nCustom.innerText);\n  }\n\n  if (i18nCustom.resources) {\n    $.keys(i18nCustom.resources).forEach(function (lng) {\n      var resource = i18nCustom.resources[lng];\n\n      if (resource.custom) {\n        if (resource.translation) {\n          $.keys(resource.custom).forEach(function (keyGroup) {\n            $.extend(resource.translation[keyGroup], resource.custom[keyGroup]);\n          });\n        } else {\n          resource.translation = resource.custom;\n        }\n      }\n    });\n  }\n\n  function localize(selector, opts) {\n    selector = selector || '[data-i18n]';\n    opts = opts || {};\n    var $els = $(selector).filter(function () {\n      return $.includes(this.dataset, 'i18n');\n    });\n    Shiny.setInputValue('__tutorial_language', i18next.language);\n\n    if (!$els.length) {\n      return;\n    }\n\n    $els.each(function (idx) {\n      var optsItem = $.extend({}, opts);\n\n      if (this.dataset.i18nOpts) {\n        optsItem = $.extend(optsItem, JSON.parse(this.dataset.i18nOpts));\n      }\n\n      if (this.dataset.i18n) {\n        this.innerHTML = i18next.t(this.dataset.i18n, optsItem);\n      }\n\n      var i18nAttrs = $.keys(this.dataset).filter(function (x) {\n        return x.match('i18nAttr');\n      });\n\n      for (var j = 0; j < i18nAttrs.length; j++) {\n        this.setAttribute(i18nAttrs[j].replace(/^i18nAttr/, '').toLowerCase(), i18next.t(this.dataset[i18nAttrs[j]], optsItem));\n      }\n    });\n    return $els;\n  }\n\n  i18next.init({\n    lng: i18nCustom.language || 'en',\n    fallbackLng: 'en',\n    ns: 'translation',\n    resources: i18nCustom.resources || {}\n  }, function (err, t) {\n    if (err) return console.log('[i18next] Error loading translations:', err);\n    localize();\n  });\n\n  window.tutorial.$localize = function (lang, selector, opts) {\n    if (typeof lang === 'undefined') {\n      return i18nCustom;\n    }\n\n    i18next.changeLanguage(lang);\n    localize(selector, opts);\n  };\n\n  $(document).on('shiny:value', '.tutorial-question', function (ev) {\n    setTimeout(function () {\n      localize(ev.target.closest('.tutorial-question').querySelectorAll('[data-i18n]'));\n    }, 0);\n  });\n  $(document).on('shiny:value', '.tutorial-exercise-output', function (ev) {\n    setTimeout(function () {\n      localize(ev.target.closest('.tutorial-exercise-output').querySelectorAll('[data-i18n]'));\n    }, 0);\n  });\n  $(document).on('i18n', function (ev) {\n    localize(ev.target);\n    localize(ev.target.querySelectorAll('[data-i18n]'));\n  });\n\n  function localizeHandler(x) {\n    var selector, language;\n\n    if (typeof x === 'string' || Array.isArray(x) && x.every(function (s) {\n      return typeof s === 'string';\n    })) {\n      selector = x;\n    } else if (_typeof(x) === 'object') {\n      selector = x.selector || '[data-i18n]';\n      language = x.language;\n    } else {\n      return console.log('localize message must be a string with selector(s) or an object with optional keys selector and language.');\n    }\n\n    if (language) {\n      i18next.changeLanguage(language);\n    }\n\n    localize(selector, x.opts || {});\n  }\n\n  Shiny.addCustomMessageHandler('localize', localizeHandler);\n});"],
  "mappings": "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",
  "names": []
}
