<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="An in-depth guide to publishing learnr tutorials on [shinyapps.io](https://www.rstudio.com/products/shinyapps/), with advice on sizing your Shiny app instances to meet the demands of students when learnr tutorials are used for workshops or in class rooms.
">
<title>Publishing on shinyapps.io • learnr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.1/font.css" rel="stylesheet">
<link href="../deps/_Source%20Code%20Pro-0.4.1/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Publishing on shinyapps.io">
<meta property="og:description" content="An in-depth guide to publishing learnr tutorials on [shinyapps.io](https://www.rstudio.com/products/shinyapps/), with advice on sizing your Shiny app instances to meet the demands of students when learnr tutorials are used for workshops or in class rooms.
">
<meta property="og:image" content="https://pkgs.rstudio.com/learnr/learnr-social.png">
<meta property="og:image:alt" content="learnr package">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@rstudio">
<meta name="twitter:site" content="@rstudio">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><meta name="pkgdown-site-root" content="../">
<script src="../snippets/ace/ace.js" type="text/javascript" charset="utf-8"></script><script src="../snippets/snippets.js" type="text/javascript" charset="utf-8"></script><style type="text/css">
.snippet {
  border: solid 1px #cccccc;
  margin-bottom: 12px;
  width: 100%;
}
</style>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">learnr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/learnr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/examples.html">Examples</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Learn learnr</h6>
    <a class="dropdown-item" href="../articles/exercises.html">Interactive Exercises</a>
    <a class="dropdown-item" href="../articles/questions.html">Interactive Questions</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Publish</h6>
    <a class="dropdown-item" href="../articles/publishing.html">Publishing Basics</a>
    <a class="dropdown-item" href="../articles/shinyapps-publishing.html">Publishing on shinyapps.io</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Customize</h6>
    <a class="dropdown-item" href="../articles/formats.html">Tutorial Formats</a>
    <a class="dropdown-item" href="../articles/multilang.html">Internationalization</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/learnr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Publishing on shinyapps.io</h1>
                        <h4 data-toc-skip class="author">Angela Li</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/learnr/blob/HEAD/vignettes/shinyapps-publishing.Rmd" class="external-link"><code>vignettes/shinyapps-publishing.Rmd</code></a></small>
      <div class="d-none name"><code>shinyapps-publishing.Rmd</code></div>
    </div>

    
    
<p>You may be interested in deploying your learnr tutorial on <a href="https://www.shinyapps.io/" class="external-link">shinyapps.io</a> so that students can access them from the web browser.</p>
<p>However, you will need to know how to optimize your application settings so that your tutorials are able to handle a large number of users at once (for example, a 60-person class logging onto the same tutorial to complete interactive exercises during a statistics lecture).</p>
<p>In order to publish your tutorials on <code>shinyapps.io</code>, you can follow the <a href="https://rstudio.github.io/learnr/publishing.html#rstudio_connect_and_shinyappsio" class="external-link">normal process of publishing your tutorials from the RStudio IDE</a> to <code>shinyapps.io</code>. This will not be covered extensively here, as our main concern is optimizing tutorial performance.</p>
<div class="section level2">
<h2 id="alternative-options-for-hosting-learnr-tutorials">Alternative options for hosting learnr tutorials<a class="anchor" aria-label="anchor" href="#alternative-options-for-hosting-learnr-tutorials"></a>
</h2>
<p>Note that there are other options for hosting tutorials besides <code>shinyapps.io</code>, such as:</p>
<ul>
<li>
<a href="https://rstudio.github.io/learnr/publishing.html#r_package" class="external-link">creating a tutorial package</a> that students run locally (free, but requires students to be able to download and install packages, as well as run commands in R), or</li>
<li>setting up your own <a href="https://rstudio.com/pricing/academic-pricing/" class="external-link">free academic Shiny Server Pro account</a> (free, provided you have a server at your institution that will host the software, which may require IT help).</li>
</ul>
<p>Both of these require some configuration and setup, and may be beyond what either you or your students wish to undertake at the time (i.e. if you are running a short-term course). This leads to a third option that costs money, but may save you valuable time on system administration: deploying your learnr tutorial on <code>shinyapps.io</code>.</p>
<p><strong>Note</strong>: Currently, the free <code>shinyapps.io</code> service is designed for no more than three to five users at once. If you would like multiple users to be able to access the service without the tutorial crashing, you will need to <a href="https://www.shinyapps.io/#pricing" class="external-link">pay for a hosted <code>shinyapps.io</code> service</a>.</p>
</div>
<div class="section level2">
<h2 id="optimal-settings-for-shinyapps-io">Optimal settings for shinyapps.io<a class="anchor" aria-label="anchor" href="#optimal-settings-for-shinyapps-io"></a>
</h2>
<p>As an educator, we assume you have a few concerns:</p>
<ol style="list-style-type: decimal">
<li>How can my students access the same tutorials concurrently, over multiple sessions, over a long period of time?</li>
<li>How can I reduce the cost of tutorial hosting?</li>
</ol>
<p>Balancing these two things will be a part of figuring out your optimal configuration settings.</p>
<div class="section level3">
<h3 id="optimizing-for-classroom-settings">Optimizing for classroom settings<a class="anchor" aria-label="anchor" href="#optimizing-for-classroom-settings"></a>
</h3>
<p>Once you have published your tutorials to <code>shinyapps.io</code>, log into your account, click on the application page and configure the following:</p>
<ul>
<li>
<strong>Instances</strong>: increase to maximum amount allowed. This is the total number of independent servers that are available to run your tutorial. The more, the better! This will help handle “flash traffic” (having numerous students load the tutorial all at once) at the beginning of class.</li>
</ul>
<p><img src="img/shinyapps-publishing-instances.png" style="display: block; margin: auto;"></p>
<p>Then go to <code>Settings &gt; General</code> and configure the following:</p>
<ul>
<li>
<strong>Instance Size</strong>: increase to maximum size possible. The larger the instance, the more memory you will have to work with. The larger the memory, the more students can be concurrently working.</li>
</ul>
<p><img src="img/shinyapps-publishing-instance-size.png" style="display: block; margin: auto;"></p>
<p>Finally, go to the Settings &gt; Advanced page and configure the following:</p>
<ul>
<li>
<strong>Max Worker Processes</strong>: reduce if possible, possibly to 2. Keep this equation in mind:</li>
</ul>
<p>(Instance Size) / (Worker Processes * Max Connections) = Amount of memory available for each new student accessing your tutorial.</p>
<ul>
<li>
<strong>Max Connections</strong>: reduce if possible, possibly to 20 or so.</li>
<li>
<strong>Start Count</strong>: increase to maximum size possible. This is the number of servers (“instances”) that will launch when a single person accesses the tutorial. This means that the first student to access your tutorial during class will start all the servers so that others can access them more quickly.</li>
</ul>
<p><img src="img/shinyapps-publishing-advanced.png" style="display: block; margin: auto;"></p>
<p>We recommend you set the <strong>Start Count</strong> and <strong>Instance Size</strong> to the maximum, monitor hours used, and adjust settings from there.</p>
</div>
<div class="section level3">
<h3 id="reducing-cost">Reducing cost<a class="anchor" aria-label="anchor" href="#reducing-cost"></a>
</h3>
<p>Because you are paying for the active hours of use per month, you will want to minimize this to stay within your subscription limits. To do this, you can adjust any of the following:</p>
<ul>
<li>Reduce <strong>Start Count</strong>
</li>
<li>Increase <strong>Max Worker Processes</strong>
</li>
<li>Increase <strong>Max Connections</strong>
</li>
<li>Reduce <strong>Connection Timeout</strong>
</li>
<li>Reduce <strong>Instance Size</strong>
</li>
</ul>
<p>A good workflow is to change only one setting, observe usage metrics, and modify as needed.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-use-case">Example use case<a class="anchor" aria-label="anchor" href="#example-use-case"></a>
</h2>
<div class="section level3">
<h3 id="context">Context<a class="anchor" aria-label="anchor" href="#context"></a>
</h3>
<p>Suppose you are teaching a statistical programming seminar over 5 weeks for several class sections of 60 people each. The course is short and students have just been introduced to R and RStudio, so it may not be worth setting up a full server for hosting the seminar tutorials or asking students to configure their own R package.</p>
<p>A browser-based interface is also friendly to those who may have trouble understanding or navigating the RStudio interface during their first weeks of classes.</p>
<p>A few sections are back-to-back, so ideally, the settings on learnr tutorials are robust enough to allow the next section’s students to access them.</p>
</div>
<div class="section level3">
<h3 id="initial-settings">Initial settings<a class="anchor" aria-label="anchor" href="#initial-settings"></a>
</h3>
<p>For my situation, I had my department purchase the Standard <code>shinyapps.io</code> subscription for $100/month, which gave me <strong>2,000 Active Hours</strong> per month. (Note that <strong>Active Hours</strong> refers to the amount of time spent launching the tutorial and actively processing R code and input submitted by students on each instance.)</p>
<p>For each tutorial I deployed, I set up:</p>
<ul>
<li>
<strong>5 XXX-Large Instances (8 GB)</strong> on <code>shinyapps.io</code>,</li>
<li>with <strong>2 Worker Processes</strong> each and <strong>10 Max Connections</strong>.</li>
<li>I also set the <strong>Start Count to 5</strong>, so that all tutorials launched at once.</li>
</ul>
</div>
<div class="section level3">
<h3 id="adjusting-based-on-usage-metrics">Adjusting based on usage metrics<a class="anchor" aria-label="anchor" href="#adjusting-based-on-usage-metrics"></a>
</h3>
<p>I then observed my usage metrics in the <code>shinyapps.io</code> dashboard in <code>Metrics</code>. After noticing that my tutorials did not require excessive memory, I:</p>
<ul>
<li>changed the size of the Instances to <strong>X-Large (2 GB)</strong>
</li>
<li>increased <strong>Max Connections to 15</strong> and</li>
<li>reduced <strong>Start Count to 2</strong> once we had completed that week’s sections.</li>
</ul>
<p>After the 5-week course was done, I:</p>
<ul>
<li>canceled our <code>shinyapps.io</code> Standard subscription,</li>
<li>reduced Instance Count and Instance Size to a single <strong>Large Instance (1 GB)</strong>, and</li>
<li>left Worker Processes and Max Connections as is.</li>
</ul>
<p>This enabled students to return to the tutorial after the workshop was done, without being optimized for mass numbers of students accessing the tutorial at once.</p>
<p>We used around 1000 Active Hours in our first month, and around 300 in our second month of the course, so next year, I will likely purchase the Standard subscription (&lt;= 2000 hours / month) for one month, and reduce to the Basic level (&lt;= 500 hours / month) in the second month.</p>
<p>Example of the usage metrics dashboard below:</p>
<p><img src="img/shinyapps-publishing-metrics.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="troubleshooting-beyond-settings">Troubleshooting beyond settings<a class="anchor" aria-label="anchor" href="#troubleshooting-beyond-settings"></a>
</h3>
<p>For consecutive classes, we still had some issues with lingering open server connections from the previous class getting in the way. I published an identical learnr tutorial with a different name (i.e. <code>"tutorial-2"</code>), so I could direct some students to a different link as needed.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>learnr is a part of the <strong>R Markdown</strong> ecosystem of packages for creating computational documents in R. Learn more at <a href="https://rmarkdown.rstudio.com/" class="external-link">rmarkdown.rstudio.com</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Developed by <a href="https://www.garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="http://schloerke.com/" class="external-link">Barret Schloerke</a>, JJ Allaire, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

  </div></footer>
</body>
</html>
