<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Interactive Exercises • learnr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Interactive Exercises">
<meta name="description" content="Learn how to create interactive exercises with code chunks in R Markdown documents.">
<meta property="og:description" content="Learn how to create interactive exercises with code chunks in R Markdown documents.">
<meta property="og:image" content="https://pkgs.rstudio.com/learnr/learnr-social.png">
<meta property="og:image:alt" content="learnr package">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@rstudio">
<meta name="twitter:site" content="@rstudio">
<meta name="pkgdown-site-root" content="../">
<script src="../snippets/ace/ace.js" type="text/javascript" charset="utf-8"></script><script src="../snippets/snippets.js" type="text/javascript" charset="utf-8"></script><style type="text/css">
.snippet {
  border: solid 1px #cccccc;
  margin-bottom: 12px;
  width: 100%;
}
</style>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">learnr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.11.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/learnr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/examples.html">Examples</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Learn learnr</h6></li>
    <li><a class="dropdown-item" href="../articles/exercises.html">Interactive Exercises</a></li>
    <li><a class="dropdown-item" href="../articles/questions.html">Interactive Questions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Publish</h6></li>
    <li><a class="dropdown-item" href="../articles/publishing.html">Publishing Basics</a></li>
    <li><a class="dropdown-item" href="../articles/shinyapps-publishing.html">Publishing on shinyapps.io</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Customize</h6></li>
    <li><a class="dropdown-item" href="../articles/formats.html">Tutorial Formats</a></li>
    <li><a class="dropdown-item" href="../articles/multilang.html">Internationalization</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="dropdown-item" href="../articles/releases/learnr_v0-11-0.html">Version 0.11.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/learnr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">






<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Interactive Exercises</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/learnr/blob/feat-debounce-exercise-execution/vignettes/articles/exercises.Rmd" class="external-link"><code>vignettes/articles/exercises.Rmd</code></a></small>
      <div class="d-none name"><code>exercises.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Exercises are interactive R code chunks that allow readers to
directly execute R code and see its results.</p>
<div class="section level3">
<h3 id="exercise-options">Exercise Options<a class="anchor" aria-label="anchor" href="#exercise-options"></a>
</h3>
<p>There are many options associated with tutorial exercises (all of
which are described in more detail below):</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="81%">
</colgroup>
<thead><tr class="header">
<th>Option</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>exercise.cap</code></td>
<td>Caption for exercise chunk (defaults to “Code”)</td>
</tr>
<tr class="even">
<td><code>exercise.eval</code></td>
<td>Whether to pre-evaluate the exercise so the reader can see some
default output (defaults to <code>FALSE</code>).</td>
</tr>
<tr class="odd">
<td><code>exercise.lines</code></td>
<td>Lines of code for exercise editor (default to size of code
chunk).</td>
</tr>
<tr class="even">
<td><code>exercise.pipe</code></td>
<td>The code to insert when the user presses
<code>Ctrl/Cmd + Shift + M</code> (defaults to <code>|&gt;</code> for R
&gt;= 4.1.0, otherwise <code>%&gt;%</code>).</td>
</tr>
<tr class="odd">
<td><code>exercise.timelimit</code></td>
<td>Number of seconds to limit execution time to (defaults to 30).</td>
</tr>
<tr class="even">
<td><code>exercise.checker</code></td>
<td>Function used to check exercise answers (e.g.,
<code>gradethis::grade_learnr()</code>).</td>
</tr>
<tr class="odd">
<td><code>exercise.blanks</code></td>
<td>Regular expression to find blanks requiring replacement in the
exercise code. See <a href="#checking-blanks">Checking Blanks</a>
below.</td>
</tr>
<tr class="even">
<td><code>exercise.error.check.code</code></td>
<td>A string containing R code to use for checking code when an exercise
evaluation error occurs (e.g.,
<code>"gradethis::grade_code()"</code>).</td>
</tr>
<tr class="odd">
<td><code>exercise.completion</code></td>
<td>Whether to enable code completion in the exercise editor.</td>
</tr>
<tr class="even">
<td><code>exercise.diagnostics</code></td>
<td>Whether to enable code diagnostics in the exercise editor.</td>
</tr>
<tr class="odd">
<td><code>exercise.startover</code></td>
<td>Whether to include a “Start Over” button for the exercise.</td>
</tr>
<tr class="even">
<td><code>exercise.warn_invisible</code></td>
<td>Whether to display an invisible result warning if the last value
returned is invisible.</td>
</tr>
<tr class="odd">
<td><code>exercise.reveal_solution</code></td>
<td>Whether or not the solution should be revealed to the user (defaults
to `TRUE`). See <a href="#hiding-solutions">Hiding Solutions</a>
below.</td>
</tr>
</tbody>
</table>
<p>Note that these options can all be specified either globally or
per-chunk. For example, the following code sets global default options
using the <code>setup</code> chunk and also sets some local options on
the <code>addition</code> chunk:</p>
<div id="exerciseoptions" class="sourceCode">
<pre class="markdown">
<code>```{r setup, include=FALSE}
library(learnr)
tutorial_options(exercise.timelimit = 60)
```

```{r addition, exercise=TRUE, exercise.timelimit = 60}
1 + 1
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exerciseoptions')</script>
</div>
<div class="section level3">
<h3 id="exercise-support-chunks">Exercise Support Chunks<a class="anchor" aria-label="anchor" href="#exercise-support-chunks"></a>
</h3>
<p>There are also some other specialized chunks that can be used with an
exercise chunk. These chunks a linked together</p>
<ol style="list-style-type: decimal">
<li><p>Exercise <a href="#exercise-setup"><code>-setup</code> chunks</a>
enable you to execute code to setup the environment immediately prior to
executing submitted code.</p></li>
<li><p>Exercise <a href="#hints-and-solutions"><code>-solution</code>
chunks</a> enable you to provide a solution to the exercise that can be
optionally viewed by users of the tutorial.</p></li>
<li><p>Exercise <a href="#r-code-hints"><code>-hint</code> chunks</a>
are used to provide a series of hints to help the user progress through
the exercise.</p></li>
<li><p>Exercise <a href="#exercise-checking"><code>-check</code>,
<code>-code-check</code>, and <code>-error-check</code> chunks</a> are
used to provide logic for checking the user’s attempt to solve the
exercise.</p></li>
<li><p>Finally, exercise <a href="#test-code-or-cases"><code>-tests</code> chunks</a> can store test
cases or testing code related to the exercise.</p></li>
</ol>
<p>The use of these special chunks is also described in detail
below.</p>
</div>
</div>
<div class="section level2">
<h2 id="exercise-evaluation">Exercise Evaluation<a class="anchor" aria-label="anchor" href="#exercise-evaluation"></a>
</h2>
<p>By default, exercise code chunks are NOT pre-evaluated (i.e there is
no initial output displayed for them). However, in some cases you may
want to show initial exercise output (especially for exercises like the
ones above where the user is asked to modify code rather than write new
code from scratch).</p>
<p>You can arrange for an exercise to be pre-evaluated (and its output
shown) using the <code>exercise.eval</code> chunk option. This option
can also be set either globally or per-chunk:</p>
<div id="exerciseeval" class="sourceCode">
<pre class="markdown">
<code>```{r setup, include=FALSE}
library(learnr)
tutorial_options(exercise.eval = TRUE)
```

```{r filter, exercise=TRUE, exercise.eval=FALSE}
# Change the filter to select February rather than January
filter(nycflights, month == 1)
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exerciseeval')</script><p>To prevent server overload caused by users rapidly clicking the “Run
Code” button, you can set a delay between exercise code submissions
using the <code>tutorial.exercise.throttle</code> option (in seconds).
This will ensure that the same user can only start the evaluation of the
same exercise per <code>tutorial.exercise.throttle</code> seconds. This
option is set globally and the default is a throttle of of 1 second.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set exercise submission throttle time to 5 seconds</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"tutorial.exercise.throttle"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>To disable of this behavior, you can set the option to 0:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Disable exercise submission throttle</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"tutorial.exercise.throttle"</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="exercise-setup">Exercise Setup<a class="anchor" aria-label="anchor" href="#exercise-setup"></a>
</h2>
<p>Code chunks with <code>exercise=TRUE</code> are evaluated within
standalone environments. This means that they don’t have access to
previous computations from within the document. This constraint is
imposed so that users can execute exercises in any order (i.e. correct
execution of one exercise never depends on completion of a prior
exercise).</p>
<div class="section level3">
<h3 id="exercise-setup-chunks">Exercise Setup Chunks<a class="anchor" aria-label="anchor" href="#exercise-setup-chunks"></a>
</h3>
<p>You can arrange for setup code to be run before evaluation of an
exercise to ensure that the environment is primed correctly. There are
three ways to provide setup code for an exercise:</p>
<ol style="list-style-type: decimal">
<li>Add code to a <a href="#setup-global">global <code>setup</code>
chunk</a>
</li>
<li>Create a <a href="#setup-shared">shared setup chunk</a>
</li>
<li>Create an <a href="#setup-exercise-specific">exercise-specific setup
chunk</a>
</li>
</ol>
<p>Each of these is described in more detail below. Note that you may
also <a href="#setup-chained">chain setup chunks</a>, which is
particularly helpful when exercises build upon each other.</p>
<div class="section level4">
<h4 id="setup-global">Add code to the global <code>setup</code> chunk<a class="anchor" aria-label="anchor" href="#setup-global"></a>
</h4>
<p>Code in the global <code>setup</code> chunk is run once at the
startup of the tutorial and is shared by all exercises within the
tutorial. For example:</p>
<div id="exercisesetup" class="sourceCode">
<pre class="markdown">
<code>```{r setup, include=FALSE}
nycflights 
</code></pre>
</div>
<script type="text/javascript">loadSnippet('exercisesetup')</script>
</div>
<div class="section level4">
<h4 id="setup-shared">Create a shared setup chunk<a class="anchor" aria-label="anchor" href="#setup-shared"></a>
</h4>
<p>If you don’t want to rely on global setup but would rather create
setup code that’s used by only a handful of exercises you can use the
<code>exercise.setup</code> chunk attribute to provide the label of
another chunk that will perform setup tasks. To illustrate, we’ll
re-write the previous example to use a shared setup chunk named
<code>prepare-flights</code>:</p>
<div id="exercisesetupshared" class="sourceCode">
<pre class="markdown">
<code>```{r prepare-flights}
nycflights 
</code></pre>
</div>
<script type="text/javascript">loadSnippet('exercisesetupshared')</script>
</div>
<div class="section level4">
<h4 id="setup-exercise-specific">Create an exercise-specific <code>-setup</code> chunk<a class="anchor" aria-label="anchor" href="#setup-exercise-specific"></a>
</h4>
<p><strong>learnr</strong> will automatically associate any chunk with a
label in the format <code>&lt;exercise&gt;-setup</code> as a setup chunk
specifically associated with <code>&lt;exercise&gt;</code>, where
<code>&lt;exercise&gt;</code> is replaced with the label of the exercise
chunk. For example, the <code>filter-setup</code> chunk will be used as
the setup chunk for the <code>filter</code> exercise:</p>
<div id="exercisesetupsuffix" class="sourceCode">
<pre class="markdown">
<code>```{r filter-setup}
nycflights 
</code></pre>
</div>
<script type="text/javascript">loadSnippet('exercisesetupsuffix')</script>
</div>
<div class="section level4">
<h4 id="setup-chained">Chained setup chunks<a class="anchor" aria-label="anchor" href="#setup-chained"></a>
</h4>
<p>If may also chain setup chunks where each setup chunk inherits its
parent setup chunk using the <code>exercise.setup</code> chunk option.
(<strong>Note</strong>: You must use <code>exercise.setup</code> for
chaining. You cannot rely on the <code>-setup</code> suffix labeling
scheme.) <strong>learnr</strong> will keep following the trail of
<code>exercise.setup</code> chunks until there are no more chunks to be
found. To demonstrate, we can convert the first exercise in the above
examples to be another setup chunk called <code>filtered-flights</code>
with its <code>exercise.setup=prepare-flights</code>. This will now
filter the data and store it and can be referenced inside the
<code>arrange</code> exercise:</p>
<div id="exercisesetupchained" class="sourceCode">
<pre class="markdown">
<code>```{r prepare-flights}
nycflights 
</code></pre>
</div>
<script type="text/javascript">loadSnippet('exercisesetupchained')</script><p>You can chain use exercise chunks in the setup chunk chain, but keep
in mind that the code as it appears in the R Markdown source is used to
serve as the setup code, not the user input. For example, if you turned
<code>filtered-flights</code> back to an exercise, the pre-filled code
is used as setup for the <code>arrange</code> exercise that use it as
its setup:</p>
<div id="exercisechained" class="sourceCode">
<pre class="markdown">
<code>```{r prepare-flights}
nycflights 
</code></pre>
</div>
<script type="text/javascript">loadSnippet('exercisechained')</script>
</div>
</div>
<div class="section level3">
<h3 id="using-files-in-exercises">Using Files in Exercises<a class="anchor" aria-label="anchor" href="#using-files-in-exercises"></a>
</h3>
<p>Occasionally, you may write an exercise that requires users to
interact with files on disk, such as data files in <code>.csv</code> or
<code>.rds</code> format. <strong>learnr</strong> will look for a folder
named <code>data/</code> in the same directory as the tutorial source
and, if present, will make this directory available to users in all
exercises in the tutorial.</p>
<p>To ensure consistency between each evaluation of the user’s code,
users interact with a temporary copy of the original directory. This
way, users cannot overwrite or delete the original files. Additionally,
in the exercise, the directory is always called <code>data/</code>.</p>
<p>There are three ways authors can include files for use in
exercises:</p>
<ol style="list-style-type: decimal">
<li><p>Store the files in a <code>data/</code> directory in the same
directory as the tutorial.</p></li>
<li><p>Use the setup chunk to download or write the files to a
<code>data/</code> directory.</p></li>
<li><p>Use the <code>tutorial.data_dir</code> global option or the
<code>TUTORIAL_DATA_DIR</code> environment variables to specify a path
to a data directory.</p></li>
</ol>
<p>In the example below, the global setup chunk is used to write
<code>data/flights_jan.csv</code> and users are asked to load this file
with <code>read_csv()</code>.</p>
<div id="exercisedata" class="sourceCode">
<pre class="markdown">
<code>```{r setup}
library(tidyverse)

flights_jan % 
  filter(month == 2)
  
dir.create("data",  showWarnings = FALSE)
write_csv(flights_jan, "data/flights_jan.csv")
```

```{r read-flights, exercise=TRUE}
read_csv("data/flights_jan.csv")
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisedata')</script>
</div>
</div>
<div class="section level2">
<h2 id="hints-and-solutions">Hints and Solutions<a class="anchor" aria-label="anchor" href="#hints-and-solutions"></a>
</h2>
<p>You can optionally provide a hint or solution for each exercise that
can be optionally displayed by users. Hints can be based on either R
code snippets or on custom markdown/HTML content.</p>
<div class="section level3">
<h3 id="r-code-hints">R Code Hints<a class="anchor" aria-label="anchor" href="#r-code-hints"></a>
</h3>
<p>To create a hint or solution based on R code simply create a new code
chunk with “-hint” or “-solution” chunk label suffix. For example:</p>
<div id="exercisesolution" class="sourceCode">
<pre class="markdown">
<code>```{r filter, exercise=TRUE}
# Change the filter to select February rather than January
nycflights 
</code></pre>
</div>
<script type="text/javascript">loadSnippet('exercisesolution')</script><p>A “Hint” or “Solution” button is added to the left side of the
exercise header region:</p>
<p><img src="images/solution.png" width="732" height="183"></p>
</div>
<div class="section level3">
<h3 id="markdown-hints">Markdown Hints<a class="anchor" aria-label="anchor" href="#markdown-hints"></a>
</h3>
<p>To create a hint based on custom markdown content simply add a
<code>&lt;div&gt;</code> tag with an <code>id</code> attribute that
marks it as hint for your exercise (e.g. “filter-hint”). For
example:</p>
<div id="exercisehintdiv" class="sourceCode">
<pre class="markdown">
<code>```{r filter, exercise=TRUE}
# filter the flights table to include only United and American flights
flights
```

<div id="filter-hint">
**Hint:** You may want to use the dplyr `filter` function.
</div></code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisehintdiv')</script><p>The content within the <code>&lt;div&gt;</code> will be displayed
underneath the R code editor for the exercise whenever the user presses
the “Hint” button.</p>
</div>
<div class="section level3">
<h3 id="multiple-hints">Multiple Hints<a class="anchor" aria-label="anchor" href="#multiple-hints"></a>
</h3>
<p>For R code hints you can provide a sequence of hints that reveal
progressively more of the solution as desired by the user. To do this
create a sequence of indexed hint chunks (e.g. “-hint-1”,
“-hint-2,”-hint-3”, etc.) for your exercise chunk. For example:</p>
<div id="exercisehints" class="sourceCode">
<pre class="markdown">
<code>```{r filter, exercise=TRUE}
# filter the flights table to include only United and American flights
flights
```

```{r filter-hint-1}
filter(flights, ...)
```

```{r filter-hint-2}
filter(flights, UniqueCarrier=="AA")
```

```{r filter-hint-3}
filter(flights, UniqueCarrier=="AA" | UniqueCarrier=="UA")
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisehints')</script>
</div>
<div class="section level3">
<h3 id="hiding-solutions">Hiding Solutions<a class="anchor" aria-label="anchor" href="#hiding-solutions"></a>
</h3>
<p>By default, the exercise solution is made available to the user with
the “Solution” or “Hint” button (if there are hints those will appear
first). If you would prefer not to reveal the solution to an exercise,
you can disable revealing the solution by adding
<code>exercise.reveal_solution = FALSE</code> to the chunk options of
either the exercise or its corresponding <code>*-solution</code>
chunk.</p>
<div id="exercisesolutionhidden" class="sourceCode">
<pre class="markdown">
<code>```{r filter, exercise=TRUE}
# filter the flights table to include only United and American flights
flights
```

```{r filter-hint-1}
filter(flights, ...)
```

```{r filter-hint-2}
filter(flights, UniqueCarrier=="AA")
```

```{r filter-solution, exercise.reveal_solution = FALSE}
filter(flights, UniqueCarrier=="AA" | UniqueCarrier=="UA")
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisesolutionhidden')</script><p>You can also set this option globally in the global
<code>setup</code> chunk with <code><a href="../reference/tutorial_options.html">tutorial_options()</a></code>. When set
this way, the chunk-level option will take precedence over the global
option so that you can choose to always reveal or hide the solution to a
particular exercise. The current default is to reveal exercise
solutions, but in a future version of learnr the default behavior will
change to hide solutions.</p>
</div>
</div>
<div class="section level2">
<h2 id="progressive-reveal">Progressive Reveal<a class="anchor" aria-label="anchor" href="#progressive-reveal"></a>
</h2>
<p>You might want users of your tutorials to see only one sub-topic at a
time as they work through the material (this can be helpful to reduce
distractions and maintain focus on the current task). If you specify the
<code>progressive</code> option then all Level 3 headings
(<code>###</code>) will be revealed progressively. For example:</p>
<div id="tutorialyaml-progressive" class="sourceCode">
<pre class="markdown">
<code>---
title: "Hello, Tutorial!"
output: 
  learnr::tutorial:
    progressive: true
runtime: shiny_prerendered
---</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('tutorialyaml-progressive')</script><p>You can also specify this option on a per topic basis using the
<code>data-progressive</code> attribute. For example, the following code
enables progressive rendering for a single topic:</p>
<div id="tutorialyaml-progressive-topic" class="sourceCode">
<pre class="markdown">
<code>
## Topic 1  {data-progressive=TRUE}</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('tutorialyaml-progressive-topic')</script><p>You can also use <code>data-progressive=FALSE</code> to disable
progressive rendering for an individual topic if the global
<code>progressive</code> option is <code>TRUE</code>.</p>
<p>Progressive reveal provides an easy way to cue exercises one at a
time: place each exercise under its own Level 3 header
(<code>###</code>). This can be useful when a second exercises builds on
the first, giving away the answer to the first.</p>
<p>Note that this feature is only available if you are using the <a href="formats.html#tutorial-format"><code>learnr::tutorial</code></a> R
Markdown format (other custom formats may have their own internal
mechanisms for progressive reveal).</p>
<div class="section level3">
<h3 id="exercise-skipping">Exercise Skipping<a class="anchor" aria-label="anchor" href="#exercise-skipping"></a>
</h3>
<p>When the <code>progressive</code> option is set to true, the tutorial
will require students to complete any exercises in a sub-section before
advancing to the next sub-section.</p>
<p>You may want to allow users of your tutorials to skip through
exercises that they can’t quite figure out. This might especially be
true if you want users to be able to optionally see the next exercise
even if they haven’t completed the prior one.</p>
<p>If you specify the <code>allow_skip</code> option then students will
be able to advance through a sub-section without completing the
exercises. For example:</p>
<div id="tutorialyaml-allowskip" class="sourceCode">
<pre class="markdown">
<code>---
title: "Hello, Tutorial!"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
---</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('tutorialyaml-allowskip')</script><p>You can also specify this option on a per sub-topic basis using the
<code>data-allow-skip</code> attribute. For example, the following code
enables exercise skipping within a single sub-topic:</p>
<div id="tutorialyaml-allowskip-topic" class="sourceCode">
<pre class="markdown">
<code>
### Exercise 2 {data-allow-skip=TRUE}</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('tutorialyaml-allowskip-topic')</script><p>You can also use <code>data-allow-skip=FALSE</code> to disable
exercise skipping rendering for an individual sub-topic if the global
<code>allow-skip</code> option is <code>TRUE</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="exercise-checking">Exercise Checking<a class="anchor" aria-label="anchor" href="#exercise-checking"></a>
</h2>
<p><strong>learnr</strong> provides allows full control over feedback
provided to exercise submissions via <code>exercise.checker</code> in
<code><a href="../reference/tutorial_options.html">tutorial_options()</a></code>. We’ll eventually cover how to implement
a custom <code>exercise.checker</code>, but for sake of demonstration,
this section uses <a href="https://github.com/rstudio-education/gradethis" class="external-link"><strong>gradethis</strong></a>’s
approach to exercise checking, which doesn’t require knowledge of
<code>exercise.checker</code> (<strong>NOTE</strong>:
<strong>gradethis</strong> is still a work-in-progress. You may want to
consider alternatives such as <a href="https://github.com/dtkaplan/checkr" class="external-link"><strong>checkr</strong></a>).
To use <strong>gradethis</strong>’s approach to exercise checking inside
of <strong>learnr</strong>, just call <code>gradethis_setup()</code> in
a <a href="#Exercise_Setup">setup</a> chunk, which will set
<code>tutorial_options(exercise.checker = gradethis::grade_learnr)</code>
(among other things).</p>
<div class="section level3">
<h3 id="checking-results">Checking Results<a class="anchor" aria-label="anchor" href="#checking-results"></a>
</h3>
<p>Checking of exercise results may be done through a
<code>*-check</code> chunk. With a <strong>gradethis</strong> setup,
results can be graded with <code>grade_result()</code>, like so:</p>
<div id="exercisecheck" class="sourceCode">
<pre class="markdown">
<code>```{r setup, include=FALSE}
library(learnr)
gradethis::gradethis_setup()
```

* Submit `1+1` to receive a correct grade.

```{r exercise1, exercise = TRUE}

```
 
```{r exercise1-check}
grade_result(
  pass_if(~identical(.result, 2))
)
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisecheck')</script><p>When an exercise <code>*-check</code> chunk is provided,
<strong>learnr</strong> provides an additional “Submit Answer” button,
which allows users to experiment with various answers before formally
submitting an answer:</p>
<p><img src="images/exercise-result.png" width="100%" style="border: 1px solid #ddd; box-shadow:5px 5px 5px #eee;"></p>
</div>
<div class="section level3">
<h3 id="checking-code">Checking Code<a class="anchor" aria-label="anchor" href="#checking-code"></a>
</h3>
<p>Checking of exercise <em>code</em> may be done through a
<code>*-code-check</code> chunk. With a <strong>gradethis</strong>
setup, if you supply a <code>*-solution</code> chunk and call
<code>grade_code()</code> inside <code>*-code-check</code>, then you get
detection of differences in the R syntax between the submitted exercise
code and the solution code.</p>
<div id="exercisecodecheck" class="sourceCode">
<pre class="markdown">
<code>```{r setup, include=FALSE}
library(learnr)
gradethis::gradethis_setup()
```

* Submit `1+1` to receive a correct grade.

```{r exercise1, exercise = TRUE}

```

```{r exercise1-solution}
1+1
```
 
```{r exercise1-code-check}
grade_code()
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisecodecheck')</script><p><img src="images/exercise-code.png" width="100%" style="border: 1px solid #ddd; box-shadow:5px 5px 5px #eee;"></p>
<p>It’s worth noting that, when a <code>*-code-check</code> chunk is
supplied, the check is done <em>prior</em> to evaluation of the exercise
submission, meaning that if the <code>*-code-check</code> chunk returns
feedback, then that feedback is displayed, no exercise code is
evaluated, and no result check is performed.</p>
</div>
<div class="section level3">
<h3 id="checking-blanks">Checking Blanks<a class="anchor" aria-label="anchor" href="#checking-blanks"></a>
</h3>
<p>Occasionally, you may include blanks in the pre-filled code in your
exercise prompts — sections of the code in the exercise prompt that
students should fill in. By default, <strong>learnr</strong> will detect
sequences of three or more underscores, e.g. <code>____</code> as
blanks, regardless of where they appear in the user’s submitted
code.</p>
<div id="exerciseblanks" class="sourceCode">
<pre class="markdown">
<code>Fill in the blank to create an expression that adds up to **4**.

```{r blank, exercise = TRUE, exercise.blanks = "___+"}
1 + ____
```

```{r blank-solution}
1 + 3
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exerciseblanks')</script><p><img src="images/exercise-blanks.png" width="100%" style="border: 1px solid #ddd; box-shadow:5px 5px 5px #eee;"></p>
<p>You can choose your own blank pattern by setting the
<code>exercise.blanks</code> chunk option to a regular expression that
identifies your blanks. You may also set
<code>exercise.blanks = TRUE</code> to use the default
<strong>learnr</strong> blank pattern, or
<code>exercise.blanks = FALSE</code> to skip blank checking altogether.
Globally <code><a href="../reference/tutorial_options.html">tutorial_options()</a></code> can be used to set the value of
this argument for all exercises.</p>
<p>Submitted code with blanks will still be evaluated, but the other
exercise checks will not be performed. This lets the student see the
output of their code—which may produce a valid result—but still draws
the student’s attention to the code that needs to be completed.</p>
</div>
<div class="section level3">
<h3 id="checking-errors">Checking Errors<a class="anchor" aria-label="anchor" href="#checking-errors"></a>
</h3>
<p>In the event that an exercise submission generates an error, checking
of the code (or its result, which is an error condition) may be done
through either a <code>*-error-check</code> chunk or through the global
<code>exercise.error.check.code</code> option. If an
<code>*-error-check</code> chunk is provided, you must also include a
<code>*-check</code> chunk, typically to provide feedback in case the
submission <em>doesn’t</em> generate an error.</p>
<p>With a <strong>gradethis</strong> setup,
<code>exercise.error.check.code</code> is set to
<code>grade_code()</code>. This means that, by default, users will
receive intelligent feedback for a submission that generates an error
using the <code>*-solution</code> chunk, if one is provided.</p>
<p><img src="images/exercise-error.png" width="100%" style="border: 1px solid #ddd; box-shadow:5px 5px 5px #eee;"></p>
<p>To learn more about grading exercises with
<strong>gradethis</strong>, see its grading demo (<a href="https://github.com/rstudio-education/gradethis/blob/main/inst/tutorials/grading-demo/grading-demo.Rmd" class="external-link"><code>gradethis::gradethis_demo()</code></a>).</p>
</div>
<div class="section level3">
<h3 id="custom-checking">Custom Checking<a class="anchor" aria-label="anchor" href="#custom-checking"></a>
</h3>
<p>If you need custom exercise checking logic that isn’t already
provided grading packages like <a href="https://github.com/rstudio-education/gradethis" class="external-link"><strong>gradethis</strong></a>,
then you may want to write your own <code>exercise.checker</code>
function. This function is called on exercise submission whenever
<code>*-check</code> or <code>*-code-check</code> chunks exist. When
called, this function receives all the information that
<strong>learnr</strong> knows about the exercise at the time of the
checking, including the <code>user_code</code>,
<code>solution_code</code>, <code>check_code</code>, exercise
environments, the <code>last_value</code> (if any), and the
<code>stage</code> of checking. Checking can be performed at three
different time points, so the values supplied can differ depending on
the time point:</p>
<ol style="list-style-type: decimal">
<li>Before exercise evaluation, at this stage:
<ul>
<li>
<code>stage</code> is <code>"code_check"</code>.</li>
<li>
<code>check_code</code> contains <code>*-code-check</code> chunk
code.</li>
<li>
<code>envir_result</code>, <code>evaluate_result</code>, and
<code>last_value</code> are all <code>NULL</code>.</li>
</ul>
</li>
<li>During evaluation, when an error occurs:
<ul>
<li>
<code>stage</code> is <code>"error_check"</code>.</li>
<li>
<code>check_code</code> contains <code>*-error-check</code> chunk
code.</li>
<li>
<code>last_value</code> contains the error condition object.</li>
</ul>
</li>
<li>After exercise evaluation, at this stage:
<ul>
<li>
<code>stage</code> is <code>"check"</code>.</li>
<li>
<code>check_code</code> contains <code>*-check</code> chunk
code.</li>
<li>
<code>last_value</code> contains the last printed value.</li>
</ul>
</li>
</ol>
<p>If, at any one of these stages, feedback should be provided, then
<code>exercise.checker</code> should return an R list with, at the very
least, a <code>correct</code> flag and feedback
<code>message</code>:</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="94%">
</colgroup>
<thead><tr class="header">
<th>Field</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>message</code></td>
<td>Feedback message. Can be a plain character vector or can HTML
produced via the <a href="https://cran.r-project.org/web/packages/htmltools/index.html" class="external-link">htmltools</a>
package.</td>
</tr>
<tr class="even">
<td><code>correct</code></td>
<td>TRUE/FALSE logical value indicating whether the submitted answer was
correct.</td>
</tr>
<tr class="odd">
<td><code>type</code></td>
<td>Feedback type (visual presentation style). Can be “auto”, “success”,
“info”, “warning”, “error”, or “custom”. Note that “custom” implies that
the “message” field is custom HTML rather than a character vector.</td>
</tr>
<tr class="even">
<td><code>location</code></td>
<td>Location for feedback (“append”, “prepend”, or “replace”).</td>
</tr>
</tbody>
</table>
<p>Below is a rough sketch of how one might implement an
<code>exercise.checker</code> function.</p>
<div id="customchecker" class="sourceCode">
<pre class="markdown">
<code>```r
custom_checker 
</code></pre>
</div>
<script type="text/javascript">loadSnippet('customchecker')</script><p>See the table below for a full description of all the arguments
supplied to <code>exercise.checker</code>.</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="86%">
</colgroup>
<thead><tr class="header">
<th>Argument</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>label</code></td>
<td>Label for exercise chunk.</td>
</tr>
<tr class="even">
<td><code>user_code</code></td>
<td>R code submitted by the user.</td>
</tr>
<tr class="odd">
<td><code>solution_code</code></td>
<td>Code provided within the “-solution” chunk for the exercise.</td>
</tr>
<tr class="even">
<td><code>check_code</code></td>
<td>Code provided within the “-check” chunk for the exercise.</td>
</tr>
<tr class="odd">
<td><code>envir_result</code></td>
<td>The R environment <strong>after</strong> the execution of the
chunk.</td>
</tr>
<tr class="even">
<td><code>evaluate_result</code></td>
<td>The return value from the <a href="https://www.rdocumentation.org/packages/evaluate/topics/evaluate" class="external-link"><code>evaluate::evaluate</code></a>
function.</td>
</tr>
<tr class="odd">
<td><code>envir_prep</code></td>
<td>A copy of the R environment <strong>before</strong> the execution of
the chunk.</td>
</tr>
<tr class="even">
<td><code>last_value</code></td>
<td>The last value of the evaluated chunk.</td>
</tr>
<tr class="odd">
<td><code>engine</code></td>
<td>The <code>engine</code> value of the evaluated chunk.</td>
</tr>
<tr class="even">
<td><code>stage</code></td>
<td>The current checking <code>stage</code>.</td>
</tr>
<tr class="odd">
<td><code>...</code></td>
<td>Unused (include for compatibility with parameters to be added in the
future)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="test-code-or-cases">Test Code or Cases<a class="anchor" aria-label="anchor" href="#test-code-or-cases"></a>
</h3>
<p>In some cases, you may want to record test cases — examples of
alternative solutions, common mistakes made by students, edge cases that
are missed by your checking code, etc.</p>
<p>You can place this test code in a <code>*-tests</code> chunk. It will
be preserved in the tutorial’s R Markdown source and stored in learnr’s
internal data for the exercise, but it won’t appear in the tutorial
text. learnr doesn’t currently provide a mechanism for testing
exercises, but support for exercise testing is on the roadmap for future
development.</p>
<div id="exercise-tests" class="sourceCode">
<pre class="markdown">
<code>```{r addition, exercise = TRUE}

```

```{r addition-solution}
1 + 1
```

```{r addition-tests}
1 + 1

# one plus two ----
1 + 2

# one plus three ----
1 + 3

# one equals three ----
1 = 3

# 2 minus one ----
2 - 1
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercise-tests')</script>
</div>
</div>
<div class="section level2">
<h2 id="exercise-caption">Exercise Caption<a class="anchor" aria-label="anchor" href="#exercise-caption"></a>
</h2>
<p>By default exercises are displayed with caption of “Code”. However,
in some cases you may want either a custom per-chunk caption or a
generic caption with a different connotation (e.g. “Exercise” or
“Sandbox”). For example:</p>
<div id="exercisecaption" class="sourceCode">
<pre class="markdown">
<code>```{r setup, include=FALSE}
library(learnr)
tutorial_options(exercise.cap = "Sandbox")
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisecaption')</script>
</div>
<div class="section level2">
<h2 id="code-assistance">Code Assistance<a class="anchor" aria-label="anchor" href="#code-assistance"></a>
</h2>
<p>By default, code completions are automatically provided as users type
within the exercise editor:</p>
<p><img src="images/exercise-completion.png" width="749" height="213"></p>
<p>You can optionally disable code completion (either globally or on a
per-chunk basis) using the <code>exercise.completion</code> option. For
example, the following illustrates turning off completions globally then
enabling them for an individual chunk:</p>
<div id="exercisecompletion" class="sourceCode">
<pre class="markdown">
<code>```{r setup, include=FALSE}
library(learnr)
tutorial_options(exercise.completion = FALSE)
```

```{r histogram-plot, exercise=TRUE, exercise.completion=TRUE}

```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisecompletion')</script><p>Similarly, simple code diagnostics can also be provided, to inform
users of errors in the R code written in exercise editors. Diagnostics
can be controlled (either globally or on a per-chunk basis) using the
<code>exercise.diagnostics</code> option.</p>
</div>
<div class="section level2">
<h2 id="editor-size">Editor Size<a class="anchor" aria-label="anchor" href="#editor-size"></a>
</h2>
<p>By default, the size of the exercise editor provided to users will
match the number of lines in your code chunk (with a minimum of 2
lines). If the user adds additional lines in the course of editing the
editor will grow vertically up to 15 lines, after which it will display
a scrollbar.</p>
<p>You can also specify a number of lines explicitly using the
<code>exercise.lines</code> chunk option (this can be done on a
per-chunk or global basis). For example, the following chunk specifies
that the exercise code editor should be 15 lines high:</p>
<div id="exerciselines" class="sourceCode">
<pre class="markdown">
<code>```{r add-function, exercise=TRUE, exercise.lines=15}
# Write a function to add two numbers together
add_numbers 
</code></pre>
</div>
<script type="text/javascript">loadSnippet('exerciselines')</script>
</div>
<div class="section level2">
<h2 id="time-limits">Time Limits<a class="anchor" aria-label="anchor" href="#time-limits"></a>
</h2>
<p>To mediate the problem of code which takes longer than expected to
run you can specify the <code>exercise.timelimit</code> chunk option or
alternatively the global <code>tutorial.exercise.timelimit</code>
option.</p>
<p>The following demonstrates setting a 10 second time limit as a global
option, document level option, and chunk level option:</p>
<div id="exercisetimelimit" class="sourceCode">
<pre class="markdown">
<code>options(tutorial.exercise.timelimit = 10)

```{r setup, include=FALSE}
tutorial_options(exercise.timelimit = 10)
```

```{r exercise1, exercise=TRUE, exercise.timelimit=10}
```</code>
</pre>
</div>
<script type="text/javascript">loadSnippet('exercisetimelimit')</script><p>Since tutorials are a highly interactive format you should in general
be designing exercises that take no longer than 5 or 10 seconds to
execute. Correspondingly, the default value for
<code>tutorial.exercise.timelimit</code> if not otherwise specified is
30 seconds.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>learnr is a part of the <strong>R Markdown</strong> ecosystem of packages for creating computational documents in R. Learn more at <a href="https://rmarkdown.rstudio.com/" class="external-link">rmarkdown.rstudio.com</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Developed by <a href="https://www.garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="http://schloerke.com/" class="external-link">Barret Schloerke</a>, JJ Allaire, Alexander Rossell Hayes, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

  </div></footer>
</body>
</html>
